functionality:
  name: knit
  description: "Convert an .Rmd file to a .md file"
  arguments:
  - name: "input"
    type: file
    direction: input
    required: true
    description: "Input .Rmd file"
  resources:
  - type: r_script
    path: ./code.R
platforms:
- type: docker
  image: dataintuitive/viash:0.2.0
  target_image: dataintuitive/viash_docs
  version: 0.2.0
  docker:
    run:
    - apt install -y dirmngr --install-recommends
    - apt install -y software-properties-common
    - apt install -y apt-transport-https
    - apt-key adv --keyserver keys.gnupg.net --recv-key 'E19F5F87128899B192B1A2C2AD5F960A256A04AF'
    - add-apt-repository 'deb http://cloud.r-project.org/bin/linux/debian buster-cran35/'
    - apt update -y
    - apt install -y r-base
    - Rscript -e "install.packages('knitr')"
    - Rscript -e "install.packages('blogdown')"
  volumes:
  - name: data
    mount: /data
  workdir: /app
