---
title: "Creating a Python component"
parent: Creating components
---

```{r init, include=FALSE}
library(tidyverse)

source("../src/helper/md_helpers.R")

# change wd to where the files are located
knitr::opts_knit$set(root.dir = "../examples/hello_world_py/") 
# Remove hashtags before bash output
knitr::opts_chunk$set(comment = NA)
```

## Developing a new component

The first step of developing this component, is writing the core functionality of the component, in this case a Python script. 

#### Write a script in Python
This is a simple script which prints a simple message, along with any input provided to it through the `par["input"]` parameter.
Optionally, you can override the greeter with `par["greeter"]`.

```{r, echo = FALSE}
print_file("script.py")
```

Anything between the `## VIASH START` and `## VIASH END` lines will automatically be replaced 
at runtime with parameter values from the CLI. Anything between these two lines can be used to 
test the script without viash:

```{bash}
python script.py
```

Next, we write a meta-file describing the functionality of this component in YAML format.

#### Describe the component with as a YAML

A [viash config](config) file describes the behaviour of a script and the platform it runs on.
It consists of two main sections: `functionality` and `platforms`.


```{r, echo = FALSE}
print_file("config.vsh.yaml", "yaml")
```

The [functionality](config/functionality) section describes the core functionality of the component, such as 
its inputs, outputs, arguments, and extra resources. For each of the arguments, specifying
a description and a set of argument restrictions help create a useful command-line interface.
To ensure that your component works as expected, writing one or more tests is essential.

The platforms section specifies the requirements to execute the component on zero or more platforms.
The list of currently supported platforms are [Native](config/platform-native), [Docker](config/platform-docker),
and [Nextflow](config/platform-nextflow). If no platforms are specified, a native platform with no 
system requirements is assumed.


### Writing a first unit test
Writing a unit test for a viash component is relatively simple. 
You just need to write a Bash script (or R, or Python) which runs the executable multiple
times, and verifies the output. Take note that the test needs to produce an error code not equal to
0 when a mistake is found.


```{r, echo = FALSE}
print_file("test.py")
```

When running the test, viash will automatically build an executable and place it -- along with other 
resources and test resources -- in a temporary working directory.

