---
title: "Creating a Bash component"
parent: Creating components
---

```{r init, include=FALSE}
library(tidyverse)

source("../src/helper/md_helpers.R")

# change wd to where the files are located
knitr::opts_knit$set(root.dir = "../examples/check_if_URLS_reachable/") 
# Remove hashtags before bash output
knitr::opts_chunk$set(comment = NA)
```

# Developing a new viash component

In this tutorial, you'll create a component that does the following:

- Extract all hyperlinks from a markdown file
- Check if every URL is reachable
- Create a text report with the results 

The component will be able to run locally and as a docker container.
In order to create a component you need two files: a script for the functionality and a config file that describes the component. Let's get started!

## Prerequisites

To follow along with this tutorial, you need to have this software installed on your machine:

- An [installation of viash](/getting_started/installation).
- A **Unix shell** like Bash or Zsh.

We recommend you take a look at the [hello world example](/getting_started/hello_world_bash) first to understand how components work.

## Write a script in Bash

The first step of developing this component, is writing the core functionality of the component, in this case a bash script.  
Create a new folder named "my_viash_component" and open it. Now create a new file named **script.sh** in there and add this code as its content:

```{r, echo = FALSE}
print_file("script.sh", format = "bash", show_filename = FALSE)
```

## Describe the component using YAML

## Run the component

## Building an executable




#### Write a script in Bash
This is a simple script which prints a simple message, along with any input provided to it through the `par_input` parameter.
Optionally, you can override the greeter with `par_greeter`.



Anything between the `## VIASH START` and `## VIASH END` lines will automatically be replaced 
at runtime with parameter values from the CLI. Anything between these two lines can be used to 
test the script without viash:

```{bash}
./script.sh
```

Next, we write a meta-file describing the functionality of this component in YAML format.

#### Describe the component with as a YAML

A [viash config](/config) file describes the behaviour of a script and the platform it runs on.
It consists of two main sections: `functionality` and `platforms`.


```{r, echo = FALSE}
print_file("config.vsh.yaml", "yaml")
```

The [functionality](config/functionality) section describes the core functionality of the component, such as 
its inputs, outputs, arguments, and extra resources. For each of the arguments, specifying
a description and a set of argument restrictions help create a useful command-line interface.
To ensure that your component works as expected, writing one or more tests is essential.

The platforms section specifies the requirements to execute the component on zero or more platforms.
The list of currently supported platforms are [Native](config/platform-native), [Docker](config/platform-docker),
and [Nextflow](config/platform-nextflow). If no platforms are specified, a native platform with no 
system requirements is assumed.


### Writing a first unit test
Writing a unit test for a viash component is relatively simple. 
You just need to write a Bash script (or R, or Python) which runs the executable multiple
times, and verifies the output. Take note that the test needs to produce an error code not equal to
0 when a mistake is found.

TODO: Add unit test

When running the test, viash will automatically build an executable and place it -- along with other 
resources and test resources -- in a temporary working directory.

```{bash cleanup, echo=FALSE}
rm -r output.txt
```
